ascii_font_0 = ["  ___  ",
  " / _ \\ ",
  "| | | |",
  "| | | |",
  "| |_| |",
  " \\___/ "
]

ascii_font_1 = [" __ ",
  "/_ |",
  " | |",
  " | |",
  " | |",
  " |_|"
]

ascii_font_2 = [" ___  ",
  "|__ \\ ",
  "   ) |",
  "  / / ",
  " / /_ ",
  "|____|"
]

ascii_font_3 = [" ____  ",
  "|___ \\ ",
  "  __) |",
  " |__ < ",
  " ___) |",
  "|____/ "
]

ascii_font_4 = [" _  _   ",
  "| || |  ",
  "| || |_ ",
  "|__   _|",
  "   | |  ",
  "   |_|  "
]

ascii_font_5 = [" _____ ",
  "| ____|",
  "| |__  ",
  "|___ \\ ",
  " ___) |",
  "|____/ "
]

ascii_font_6 = ["   __  ",
  "  / /  ",
  " / /_  ",
  "| '_ \\ ",
  "| (_) |",
  " \\___/ "
]

ascii_font_7 = [" _______",
  "|____  /",
  "    / / ",
  "   / /  ",
  "  / /   ",
  " /_/    "
]

ascii_font_8 = ["  ___  ",
  " / _ \\ ",
  "| (_) |",
  " > _ < ",
  "| (_) |",
  " \\___/ "
]

ascii_font_9 = ["  ___  ",
  " / _ \\ ",
  "| (_) |",
  " \\__, |",
  "   / / ",
  "  /_/  "
]

ascii_font_min = ["     ",
  "     ",
  " ___ ",
  "|___|",
  "     ",
  "     "
]

ascii_font_o = [" _ ",
  "(_)",
  "   ",
  "   ",
  "   ",
  "   "
]

ascii_font_C = ["  _____ ",
  " / ____|",
  "| |     ",
  "| |     ",
  "| |____ ",
  " \\_____|"
]

ascii_font_F = [" ______ ",
  "|  ____|",
  "| |__   ",
  "|  __|  ",
  "| |     ",
  "|_|     "
]

icon_01d = ["                   oo                   ",
  "      .            **            .      ",
  "       *'.         **         .'*       ",
  "        '*o.       **       .o*'        ",
  "          '*'     .''.     '*'          ",
  "              .'********'.              ",
  "             o************o             ",
  "            o**************'            ",
  "   'oooooo' **************** 'oooooo'   ",
  "            '**************'            ",
  "             '************'             ",
  "               ,o******o,               ",
  "         .o*'      **      '*o.         ",
  "       ,o*'        **        '*o,       ",
  "     ,o            **            o,     ",
  "                   oo                   "
]
  
icon_01n = ["                  .,'o****o',.          ",
  "               ,'*********oo'''.        ",
  "            .o********',                ",
  "           '********,                   ",
  "         .********o                     ",
  "         ********o                      ",
  "        '********                       ",
  "        ********o                       ",
  "        ********o                       ",
  "        '********,                      ",
  "         o********.                     ",
  "          o********'                    ",
  "           '********o,                  ",
  "             'o********o',.     .       ",
  "               .,o************',        ",
  "                   .'o***oo'.           "
]


icon_02d = ["                                        ",
  "                                        ",
  "            .,,,,.               |      ",
  "         .'oo''''''',.       \\   |   /  ",
  "       .oo,.       ..,'   ,   \\     /   ",
  "      .*'              ,,,,    ,d8b,    ",
  "      ,o                   --- 88888 ---",
  "  ,,,,',                       '98P'    ",
  ",oo,                          /     \\   ",
  "o*,                          /   |   \\  ",
  "o*'                              |   '*o",
  ".o*o,,............................,,o*o.",
  "  'o******',o**********o,'**********o'  ",
  "                                        ",
  "                                        ",
  "                                        "
]
 
icon_02n = ["                                        ",
  "                                        ",
  "            .,,,,.                ____  ",
  "         .'oo''''''',.         ,''8L,-\\`.",
  "       .oo,.       ..,'   ,  ,'88,'     ",
  "      .*'              ,,,, /888/       ",
  "      ,o                   :888:        ",
  "  ,,,,',                   :888:        ",
  ",oo,                        \\888\       ",
  "o*,                          \\`.88\`._    ",
  "o*'                            \\`.9LL\`-.'",
  ".o*o,,............................,,o*o.",
  "  'o******',o**********o,'**********o'  ",
  "                                        ",
  "                                        ",
  "                                        "
]

icon_03 = ["                                        ",
  "                                        ",
  "            .,,,,.                      ",
  "         .'oo''''''',.                  ",
  "       .oo,.       ..,'   ,,',.         ",
  "      .*'              ,,,,,''oo.       ",
  "      ,o                       ,o,      ",
  "  ,,,,',                        .,''',  ",
  ",oo,                                ,oo,",
  "o*,                                  ,**",
  "o*'                                  '*o",
  ".o*o,,............................,,o*o.",
  "  'o******',o**********o,'**********o'  ",
  "                                        ",
  "                                        ",
  "                                        "
]

icon_09 = ["            .,,,,.                      ",
  "         .'oo''''''',.                  ",
  "       .oo,.       ..,'   ,,',.         ",
  "      .*'              ,,,,,''oo.       ",
  "      ,o                       ,o,      ",
  "  ,,,,',                        .,''',  ",
  ",oo,                                ,oo,",
  "o*,                                  ,**",
  "o*'                                  '*o",
  ".o*o,,............................,,o*o.",
  "  'o******',o**********o,'**********o'  ",
  "         ,           ,           ,      ",
  "     .,o*'       .,o*'       .,o*'      ",
  "   '*****'     '*****'     '*****'      ",
  "   o*****.     o*****.     o*****.      ",
  "    o**o,       o**o,       o**o,       "
]

icon_10d = ["                                        ",
  "            .,,,,.               |      ",
  "         .'oo''''''',.       \\   |   /  ",
  "       .oo,.       ..,'   ,   \\     /   ",
  "      .*'              ,,,,    ,d8b,    ",
  "      ,o                   --- 88888 ---",
  "  ,,,,',                       '98P'    ",
  ",oo,                          /     \\   ",
  "o*,                          /   |   \\  ",
  "o*'            ,             ,   |   '*o",
  ".o*o,,.    .,o*'  ...    .,o*'   .,,o*o.",
  "  'o***  '*****'  ***  '*****'   ***o'  ",
  "         o*****.       o*****.          ",
  "          o**o,         o**o,           ",
  "                                        ",
  "                                        "
]
  
icon_10n = ["                                        ",
  "            .,,,,.                ____  ",
  "         .'oo''''''',.         ,''8L,-\`.",
  "       .oo,.       ..,'   ,  ,'88,'     ",
  "      .*'              ,,,, /888/       ",
  "      ,o                   :888:        ",
  "  ,,,,',                   :888:        ",
  ",oo,                        \\888\\       ",
  "o*,                          \\`.88\\`._    ",
  "o*'            ,               \\`.9LL\\`-.'",
  ".o*o,,.    .,o*'  ...    .,o*'   .,,o*o.",
  "  'o***  '*****'  ***  '*****'   ***o'  ",
  "         o*****.       o*****.          ",
  "          o**o,         o**o,           ",
  "                                        ",
  "                                        "
]

icon_11 = ["            .,,,,.                      ",
  "         .'oo''''''',.                  ",
  "       .oo,.       ..,'   ,,',.         ",
  "      .*'              ,,,,,''oo.       ",
  "      ,o                       ,o,      ",
  "  ,,,,',                        .,''',  ",
  ",oo,                                ,oo,",
  "o*,                                  ,**",
  "o*'         / '/         / '/        '*o",
  ".o*o,,...  /_ /_  ....  /_ /_  ...,,o*o.",
  "  'o*****   / /'  ****   / /'  *****o'  ",
  "           /_/_         /_/_            ",
  "            //'          //'            ",
  "           //           //              ",
  "          /            /                ",
  "                                        "
]
  
icon_13 = ["            .,,,,.                      ",
  "         .'oo''''''',.                  ",
  "       .oo,.       ..,'   ,,',.         ",
  "      .*'              ,,,,,''oo.       ",
  "      ,o                       ,o,      ",
  "  ,,,,',                        .,''',  ",
  ",oo,                                ,oo,",
  "o*,                                  ,**",
  "o*'                                  '*o",
  ".o*o,,............................,,o*o.",
  "  'o******',o**********o,'**********o'  ",
  "       __/\\__              __/\\__       ",
  "       \\_\\/_/    __/\\__    \\_\\/_/       ",
  "       /_/\\_\\    \\_\\/_/    /_/\\_\\       ",
  "         \\/      /_/\\_\\      \\/         ",
  "                   \\/                   "
]

$weather = {
  "01d" => icon_01d,
  "01n" => icon_01n,
  "02d" => icon_02d,
  "02n" => icon_02n,
  "03d" => icon_03,
  "03n" => icon_03,
  "09d" => icon_09,
  "09n" => icon_09,
  "10d" => icon_10d,
  "10n" => icon_10n,
  "11d" => icon_11,
  "11n" => icon_11,
  "13d" => icon_13,
  "13n" => icon_13
}

$numbers = {
  "0" => ascii_font_0,
  "1" => ascii_font_1,
  "2" => ascii_font_2,
  "3" => ascii_font_3,
  "4" => ascii_font_4,
  "5" => ascii_font_5,
  "6" => ascii_font_6,
  "7" => ascii_font_7,
  "8" => ascii_font_8,
  "9" => ascii_font_9,
  "ยบ" => ascii_font_o,
  "C" => ascii_font_C,
  "F" => ascii_font_F,
  "-" => ascii_font_min
}


def wind_info(deg)
  winds = [
    ["N",   "Tramontana",   0,  45],
    ["NE",  "Greco",       45,  90],
    ["E",   "Levante",     90, 135],
    ["SE",  "Scirocco",   135, 180],
    ["S",   "Ostro",      180, 225],
    ["SW",  "Libeccio",   225, 270],
    ["W",   "Ponente",    270, 315],
    ["NW",  "Maestro",    315, 360]
  ]
  winds.map do |wnd|
    if wnd[2] <= deg and deg < wnd[3]
      return wnd
    end
  end
  return nil
end


def display_ascii(city, wind, temp, icon, mlen = 30)
  # First line with city and country
  rst = (0..15).map{ |n| "" }
  rst[0] = "#{city[0].upcase}, #{city[1].upcase} "
  rst[0] += "_" * (mlen - rst[0].length)
  # /

  # 5 lines with temperature
  temp.each_char do |char|
    if char != " "
      (0..5).map do |ii|
        rst[ii + 1] += $numbers[char][ii]
      end
    end
  end
  # /

  # A line with wind
  wind[0] = wind_info(wind[0])
  rst[8] = " " + wind[0][1] + " (" + wind[0][0] + "), " + wind[1].to_s + "km/h"
  rst[9] = "_" * mlen
  # /

  # Add offset to each line based on mlen
  (0..15).map do |ii|
    rst[ii] += " " * (mlen - rst[ii].length) + " "
  end
  # /

  # Adding icon to the right
  (0..15).map do |ii|
    rst[ii] = rst[ii] + $weather[icon][ii]
  end
  # /

  return(rst)
end